{% extends 'base/main.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}


    <style type="text/css">

        TABLE {
            width: 100%; /* Ширина таблицы */

            background: grey; /* Цвет фона таблицы */
        }

        TH {
            background: maroon; /* Цвет фона заголовка */
            color: white; /* Цвет текста */
            text-align: left; /* Выравнивание по левому краю */
        }

        TD, TH {
            padding: 5px; /* Поля вокруг текста */
        }

        #div_id_tags, #id_tags, #div_id_headline, #id_headline {

            max-height: 100px;
            border-radius: 5px;
            padding: 5px;
            border: 1px solid #888;
        }

        A {
            color: yellow; /* Цвет ссылок */
        }

        A:hover {
            color: white;
        }

        h2, h1 {
            color: palevioletred; /* Цвет текста */
            background-color: white;
        }

    </style>

    <div class="bd-example">
        <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
            </ol>
            <img src="{% static 'images/images/main.png' %}" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
                <h1>Social assictence</h1>
            </div>

        </div>
    </div>
    </br>
    <div class="container">
        <form id="searchForm" method="GET">
            {{ myFilter.form|crispy }}

            <input class="btn btn-warning" type="submit" value="Пошук">
        </form>

        </br>

        <table>
            <tr>
                <td><span class="catsTd" valign="top" id="cid2">
                        <a
                                href="https://darom.net.ua/board/odezhda_i_obuv/2"><img
                                src="https://darom.net.ua/images/icons/high-heels.png"></a>
						<a href="/board/odezhda_i_obuv/2" class="catName">Одежда3 и обувь</a>
                        <span class="catNumData" style="unicode-bidi:embed;">5</span>
					</span></li>
                </td>
                <td><span class="catsTd" valign="top" id="cid1"><a
                        href="https://darom.net.ua/board/detskij_mir/1" title="Детский мир"><img
                        src="https://darom.net.ua/images/icons/stroller.png" alt="Детский мир"></a>
						<a href="/board/detskij_mir/1" class="catName">Детский мир</a>
						 <span class="catNumData" style="unicode-bidi:embed;">5</span>
						<div class="catDescr"><img class="cat-icon" src="/images/icons/stroller.png"
                                                   style="display: none;"></div>
					</span></td>
                <td><span class="catsTd" valign="top" id="cid3"><a
                        href="https://darom.net.ua/board/khobbi_otdykh_i_sport/3" title="Хобби, отдых и спорт"><img
                        src="https://darom.net.ua/images/icons/guitar.png" alt="Хобби, отдых и спорт"></a>
						<a href="/board/khobbi_otdykh_i_sport/3" class="catName">Хобби, отдых и спорт</a>
						 <span class="catNumData" style="unicode-bidi:embed;">0</span>
						<div class="catDescr"><img class="cat-icon" src="/images/icons/guitar.png"
                                                   style="display: none;"></div>
					</span></td>
                <td><span class="catsTd" valign="top" id="cid4"><a
                        href="https://darom.net.ua/board/zhivotnye/4" title="Животные"><img
                        src="https://darom.net.ua/images/icons/pawprint.png" alt="Животные"></a>
						<a href="/board/zhivotnye/4" class="catName">Животные</a>
						 <span class="catNumData" style="unicode-bidi:embed;">7</span>
						<div class="catDescr"><img class="cat-icon" src="/images/icons/pawprint.png"
                                                   style="display: none;"></div>
					</span></td>

            </tr>

            <tr>
                <td><span class="catsTd" valign="top" id="cid5"><a
                        href="https://darom.net.ua/board/aksessuary/5" title="Аксессуары"><img
                        src="https://darom.net.ua/images/icons/suitcase.png" alt="Аксессуары"></a>
						<a href="/board/aksessuary/5" class="catName">Аксессуары</a>
						 <span class="catNumData" style="unicode-bidi:embed;">8</span>
						<div class="catDescr"><img class="cat-icon" src="/images/icons/suitcase.png"
                                                   style="display: none;"></div>
					</span>
                </td>
                <td><span class="catsTd" valign="top" id="cid7"><a
                        href="https://darom.net.ua/board/mebel/7" title="Мебель"><img
                        src="https://darom.net.ua/images/icons/armchair.png" alt="Мебель"></a>
						<a href="/board/mebel/7" class="catName">Мебель</a>
						 <span class="catNumData" style="unicode-bidi:embed;">2</span>
						<div class="catDescr"><img class="cat-icon" src="/images/icons/armchair.png"
                                                   style="display: none;"></div>
					</span></td>
                <td>
       <span class="catsTd" valign="top" id="cid6"><a
               href="https://darom.net.ua/board/ehlektronika_i_tehnika/6" title="Техника"><img
               src="https://darom.net.ua/images/icons/technology.png" alt="Техника"></a>
						<a href="/board/ehlektronika_i_tehnika/6" class="catName">Техника</a>
						 <span class="catNumData" style="unicode-bidi:embed;">6</span>
						<div class="catDescr"><img class="cat-icon" src="/images/icons/technology.png"
                                                   style="display: none;"></div>
					</span>
                </td>
                <td><span style="width:100%" class="catsTd" valign="top" id="cid8"><a
                        href="https://darom.net.ua/board/dom_i_byt/8" title="Дом и быт"><img
                        src="https://darom.net.ua/images/icons/house.png" alt="Дом и быт"></a>
						<a href="/board/dom_i_byt/8" class="catName">Дом и быт</a>
						 <span class="catNumData" style="unicode-bidi:embed;">5</span>
						<div class="catDescr"><img class="cat-icon" src="/images/icons/house.png"
                                                   style="display: none;"></div>
					</span></td>
            </tr>
        </table>
    </div>


    </br>


    <div class="post-wrapper">


        {% for post in posts %}
            <div>
                <div class="post ">
                    <img class="thumbnail" src="{{ post.thumbnail.url }}">
                    <div class="post-preview bg-transparent">
                        <h6 class="post-title">{{ post.headline }}</h6>
                        <p class="post-intro">{{ post.sub_headline }}</p>
                        <a href="{% url 'post' post.slug %}">Більше -></a>

                        {% if request.user.is_staff %}
                            | <a href="{% url 'update_post' post.slug %}">Редагувати</a>
                            | <a href="{% url 'delete_post' post.slug %}">Видалити</a>
                        {% endif %}
                        <hr>

                        <span class="tag">{{ post.tags.name }}</span>

                    </div>
                </div>
            </div>
        {% empty %}
            <h4>Оголошень не знайдено...</h4>
        {% endfor %}
    </div>

    <div class="row">

        {% if posts.has_other_pages %}

            <ul class="pagination">

                {% if posts.has_previous %}
                    <li class="page-item"><a data-page="{{ posts.previous_page_number }}"
                                             href="?page={{ posts.previous_page_number }}"
                                             class="page-link">&laquo</a></li>

                    <li class="page-item"><a data-page="1" href="?page=1" class="page-link">First</a></li>
                {% endif %}


                {% for i in posts.paginator.page_range %}
                    {% if posts.number == i %}
                        <li class="page-item"><a class="active page-link">{{ i }}</a></li>
                    {% else %}
                        <li class="page-item"><a data-page="{{ i }}" href="?page={{ i }}"
                                                 class="page-link">{{ i }}</a></li>
                    {% endif %}

                {% endfor %}


                {% if posts.has_next %}
                    <li class="page-item"><a data-page="{{ posts.paginator.num_pages }}"
                                             href="?page={{ posts.paginator.num_pages }}" class="page-link">Last</a>
                    </li>

                    <li class="page-item"><a data-page="{{ posts.next_page_number }}"
                                             href="?page={{ posts.next_page_number }}" class="page-link">&raquo</a>
                    </li>
                {% endif %}
            </ul>

        {% endif %}
    </div>
    <section class="s2">
        <div class="main-container">
            <a href=""></a>
            <h3 style="text-align: center;">Зв'язатись</h3>

            <form id="contact-form" method="POST" action="{% url 'send_email' %}">
                {% csrf_token %}
                <a name="contact"></a>

                <label>Ім'я</label>
                <input required class="input-field" type="text" name="name">

                <label>Тема</label>

                <input required class="input-field" type="text" name="subject">

                <label>E-mail</label>
                <input required class="input-field" type="text" name="email">

                <label>Повідомлення</label>
                <textarea required class="input-field" name="message"></textarea>

                <input class="btn btn-warning btn-lg btn-block" type="submit" value="Надіслати">
            </form>
        </div>
    </section>

    </div>


    <script type="text/javascript">
        let searchForm = document.getElementById('searchForm')
        let pageLinks = document.getElementsByClassName('page-link')

        for (var i = 0; pageLinks.length > i; i++) {

            pageLinks[i].addEventListener('click', function (e) {
                e.preventDefault()
                let page = this.dataset.page
                console.log('Page:', page)
                searchForm.innerHTML += `<input value="${page}" name="page" hidden >`
                searchForm.submit()
            })

        }
    </script>

{% endblock content %}